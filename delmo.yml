suite:
  name: dingo-postgresql-agent
  system: docker-compose.yml
  task_service: tests

tests:
- name: read-write
  before_startup: [purge-backups]
  spec:
  - wait: one-node-running
  - exec: [write-value]
  - assert: [retrieve-value]

tasks:
- {name: purge-backups, command: /tasks/purge-backups}
- {name: one-node-running, command: "/tasks/nodes-running 1"}
- {name: write-value, command: "/tasks/store-value testtable test-value"}
- {name: retrieve-value, command: "/tasks/retrieve-value testtable test-value"}
